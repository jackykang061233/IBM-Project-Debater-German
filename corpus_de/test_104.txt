Open Shortest Path First (OSPF) ist ein Routing-Protokoll für Internet Protocol (IP)-Netzwerke. Es verwendet einen Link-Zustands-Routing (LSR)-Algorithmus und fällt in die Gruppe der internen Gateway-Protokolle (IGPs), die in einem einzigen autonomen System (AS.) Es wird als OSPF Version 2 in RFC 2328 (1998) für IPv4 definiert. Die Updates für IPv6 werden als OSPF Version 3 in RFC 5340 (2008) angegeben. OSPF unterstützt das Classless Inter-Domain Routing (CIDR) Adressierungsmodell. OSPF ist ein weit verbreitetes IGP in großen Unternehmensnetzwerken. IS-IS, ein weiteres LSR-basiertes Protokoll, ist in großen Dienstleister-Netzwerken häufiger. Operation OSPF wurde als internes Gateway-Protokoll (IGP) für den Einsatz in einem autonomen System wie einem lokalen Netzwerk (LAN) konzipiert. Es implementiert Dijkstras Algorithmus, auch bekannt als der kürzeste Pfad zuerst (SPF) Algorithmus. Als Link-State-Routing-Protokoll basierte es auf dem für das ARPANET 1980 entwickelten Link-State-Algorithmus und dem IS-IS-Routing-Protokoll. OSPF wurde 1989 erstmals als RFC 1131 standardisiert, die jetzt als OSPF-Version bekannt ist ANHANG Die Entwicklungsarbeit für OSPF vor der Kodifizierung als offener Standard wurde weitgehend von der Digital Equipment Corporation durchgeführt, die eigene proprietäre DECnet-Protokolle entwickelt hat. Routing-Protokolle wie OSPF berechnen den kürzesten Weg zu einem Ziel durch das Netzwerk basierend auf einem Algorithmus. Das erste Routing-Protokoll, das weit verbreitet war, berechnete das Routing-Informationsprotokoll (RIP), den kürzesten Weg basierend auf Hops, d.h. die Anzahl der Router, die ein IP-Paket durchlaufen musste, um den Zielhost zu erreichen. RIP erfolgreich implementierte dynamische Routing, wo Routing-Tabellen ändern, wenn sich die Netzwerktopologie ändert. Aber RIP hat seine Routing nicht nach sich ändernden Netzbedingungen, wie Datentransferrate, angepasst. Die Nachfrage wuchs nach einem dynamischen Routing-Protokoll, das den schnellsten Weg zu einem Ziel berechnen konnte. OSPF wurde so entwickelt, dass der kürzeste Weg durch ein Netzwerk basierend auf den Kosten der Strecke unter Berücksichtigung von Bandbreite, Verzögerung und Belastung berechnet wurde. Daher übernimmt OSPF die Routenkostenberechnung auf Basis von Link-Kosten-Parametern, die vom Administrator gewichtet werden können. OSPF wurde schnell angenommen, weil es bekannt wurde, Routen durch große und komplexe lokale Netzwerke zuverlässig zu berechnen. Als Link-State-Routing-Protokoll unterhält OSPF Link-State-Datenbanken, die wirklich Netzwerk-Topologie-Karten sind, auf jedem Router, auf dem es implementiert ist. Der Zustand einer bestimmten Route im Netzwerk ist die Kosten, und OSPF-Algorithmus ermöglicht jedem Router die Kosten der Routen zu einem beliebigen erreichbaren Ziel zu berechnen. Sofern der Administrator keine Konfiguration vorgenommen hat, werden die Linkkosten eines mit einem Router verbundenen Pfads durch die Bitrate (1 Gbit/s, 10 Gbit/s, etc.) der Schnittstelle bestimmt. Eine Router-Schnittstelle mit OSPF wird dann seine Link-Kosten an benachbarte Router durch Multicast, bekannt als hallo Prozedur. Alle Router mit OSPF-Implementierung senden weiterhin hallo-Pakete, und damit Änderungen der Kosten ihrer Links werden den benachbarten Routern bekannt. Die Information über die Kosten einer Verbindung, also die Geschwindigkeit eines Punkts, um die Verbindung zwischen zwei Routern zu zeigen, wird dann durch das Netzwerk kaskadiert, weil OSPF Router die Informationen annoncieren, die sie von einem benachbarten Router zu allen anderen benachbarten Routern erhalten. Dieser Prozess der Überschwemmung von Link-Zustandsinformationen über das Netzwerk ist als Synchronisation bekannt. Anhand dieser Informationen aktualisieren alle Router mit OSPF-Implementierung ihre Link-Zustandsdatenbanken kontinuierlich mit Informationen über die Netzwerktopologie und passen ihre Routing-Tabellen an. Ein OSPF-Netzwerk kann in Routing-Bereiche strukturiert oder unterteilt werden, um die Verwaltung zu vereinfachen und die Verkehrs- und Ressourcenauslastung zu optimieren. Bereiche werden durch 32-Bit-Nummern identifiziert, die entweder einfach dezimal oder oft in der gleichen Punkt-Dezimal-Notation für IPv4-Adressen verwendet werden. Die Fläche 0 (Null,) oder 0,0.0.0 stellt durch Konvention den Kern- oder Rückgratbereich eines OSPF-Netzes dar. Während die Identifizierungen anderer Bereiche beliebig gewählt werden können; Administratoren wählen oft die IP-Adresse eines Hauptrouters in einem Bereich als Flächenkennung aus. Jeder zusätzliche Bereich muss eine Verbindung zum OSPF-Rückgratbereich haben. Solche Verbindungen werden durch einen als Flächengrenzrouter (ABR) bekannten Verbindungsrouter gehalten. Ein ABR hält separate Link-State-Datenbanken für jeden Bereich, den er bedient und hält zusammenfassende Routen für alle Bereiche im Netzwerk. OSPF erkennt Änderungen in der Topologie, wie Link-Fehler, und konvergiert auf einer neuen schleifenfreien Routing-Struktur innerhalb von Sekunden. OSPF ist zu einem beliebten dynamischen Routing-Protokoll geworden. Andere häufig verwendete dynamische Routing-Protokolle sind das RIPv2 und das Border Gateway Protocol (BGP.) Heute unterstützen Router mindestens ein internes Gateway-Protokoll, um ihre Routing-Tabellen in einem lokalen Netzwerk zu werben. Häufig implementierte interne Gateway-Protokolle neben OSPF sind RIPv2, IS-IS und EIGRP (Enhanced Interior Gateway Routing Protocol). Router-Beziehungen OSPF unterstützt komplexe Netzwerke mit mehreren Routern, einschließlich Backup-Router, um die Verkehrsbelastung auf mehreren Links zu anderen Subnetzen auszugleichen. benachbarte Router in derselben Broadcast-Domain oder an jedem Ende einer Punkt-zu-Punkt-Verbindung kommunizieren über das OSPF-Protokoll miteinander. Router bilden Adjacencies, wenn sie sich entdeckt haben. Diese Erkennung wird eingeleitet, wenn sich ein Router in einem Hello-Protokoll-Paket identifiziert. Bei Anerkennung stellt dies einen Zwei-Wege-Zustand und die grundlegendste Beziehung her. Die Router in einem Ethernet- oder Frame Relay-Netzwerk wählen einen Designated Router (DR) und einen Backup-Designated Router (BDR), die als Hub fungieren, um den Verkehr zwischen Routern zu reduzieren. OSPF verwendet sowohl unicast- als auch multicast-Übertragungsmodi, um Hello-Pakete und Link-state-Updates zu senden. Als Link-State-Routing-Protokoll, OSPF etabliert und hält Nachbarbeziehungen für den Austausch von Routing-Updates mit anderen Routern. Die Nachbar-Beziehungstabelle wird als Adjacency-Datenbank bezeichnet. Zwei OSPF-Router sind Nachbarn, wenn sie Mitglieder des gleichen Subnetzes sind und dieselbe Bereichs-ID, Subnetmaske, Timer und Authentifizierung teilen. Im Wesentlichen ist OSPF-Nachbarschaft eine Beziehung zwischen zwei Routern, die es ihnen erlauben, einander zu sehen und zu verstehen, aber nichts mehr. OSPF Nachbarn tauschen keine Routing-Informationen aus – die einzigen Pakete, die sie tauschen, sind Hallo-Pakete. OSPF Adjacencies werden zwischen ausgewählten Nachbarn gebildet und ermöglichen es ihnen, Routing-Informationen auszutauschen. Zwei Router müssen zuerst Nachbarn sein und erst dann können sie benachbart werden. Zwei Router werden benachbart, wenn mindestens einer von ihnen benannt Router oder Backup-Designated Router (auf Multiaccess-Typ-Netzwerken), oder sie sind durch einen Punkt-zu-Punkt- oder Punkt-zu-Multipoint-Netzwerk-Typ miteinander verbunden. Zur Bildung eines Nachbarverhältnisses müssen die zur Bildung der Beziehung verwendeten Schnittstellen im gleichen OSPF-Bereich liegen. Während eine Schnittstelle zu mehreren Bereichen ausgebildet sein kann, wird dies im Allgemeinen nicht praktiziert. Bei der Konfiguration in einem zweiten Bereich muss eine Schnittstelle als sekundäre Schnittstelle ausgebildet sein. Jeder OSPF Router innerhalb eines Netzwerks kommuniziert mit anderen benachbarten Routern an jeder Verbindungsschnittstelle, um die Zustände aller Adjacencies zu etablieren. Jede solche Kommunikationssequenz ist ein separates Gespräch, das durch das Paar von Router-IDs der kommunizierenden Nachbarn identifiziert wird. RFC 2328 gibt das Protokoll zur Einleitung dieser Gespräche (Hello Protocol) und zur Festlegung vollständiger Adjacencies (Database Description Packets, Link State Request Packets) an. Während des Kurses übergeht jedes Routergespräch durch maximal acht Bedingungen, die durch eine Zustandsmaschine definiert sind: Down: Der Zustand nach unten stellt den Anfangszustand eines Gesprächs dar, wenn keine Informationen zwischen Routern mit dem Hello Protocol ausgetauscht und gespeichert wurden. Versuch: Der Zustand der Versuchung ist dem Zustand der Niederlage ähnlich, außer dass ein Router im Prozess der Bemühungen ist, eine Konversation mit einem anderen Router zu etablieren, wird aber nur in NBMA-Netzwerken verwendet. Init: Der Init-Zustand zeigt an, dass ein HELLO-Paket von einem Nachbar empfangen wurde, aber der Router hat kein Zwei-Wege-Konversation aufgebaut. 2-Way: Der 2-Way-Zustand zeigt die Einrichtung eines bidirektionalen Gesprächs zwischen zwei Routern an. Dieser Zustand geht unmittelbar vor der Errichtung von Not. Dies ist der niedrigste Zustand eines Routers, der als designierter Router betrachtet werden kann. ExStart: Der ExStart-Zustand ist der erste Schritt der Zähigkeit zweier Router. Austausch: Im Exchange-Zustand sendet ein Router seine Link-Zustand-Datenbankinformationen an den Nachbar. In diesem Zustand kann ein Router alle OSPF Routing-Protokollpakete austauschen. Belastung: Im Ladezustand fordert ein Router die neuesten Link-State-Werbungen (LSAs) von seinem Nachbarn im vorherigen Zustand entdeckt. Vollständig: Der Vollzustand beendet das Gespräch, wenn die Router vollständig benachbart sind, und der Zustand erscheint in allen Router- und Netzwerk-LSAs. Die Link-Zustandsdatenbanken der Nachbarn sind vollständig synchronisiert. OSPF-Nachrichten Im Gegensatz zu anderen Routing-Protokollen trägt OSPF keine Daten über ein Transportprotokoll, wie das User Datagram Protocol (UDP) oder das Transmission Control Protocol (TCP.) Stattdessen bildet OSPF IP-Datengramme direkt aus und verpackt diese mit der Protokollnummer 89 für das IP-Protokoll-Feld. OSPF definiert fünf verschiedene Nachrichtentypen für verschiedene Kommunikationsarten: Hallo Hallo Nachrichten werden als eine Form der Gruß verwendet, um einem Router zu ermöglichen, andere benachbarte Router auf seinen lokalen Links und Netzwerken zu entdecken. Die Nachrichten stellen Beziehungen zwischen benachbarten Geräten her (genannte Adjacencies) und kommunizieren wichtige Parameter darüber, wie OSPF im autonomen System oder Bereich verwendet werden soll. Während des normalen Betriebs senden die Router in regelmäßigen Abständen Hallo-Nachrichten an ihre Nachbarn (das hello-Intervall); wenn ein Router hört auf, hallo-Nachrichten von einem Nachbarn zu empfangen, nach einer bestimmten Periode (das Totintervall) wird der Router annehmen, dass der Nachbar nach unten gegangen ist. Datenbankbeschreibung (DBD) Datenbankbeschreibungsnachrichten enthalten Beschreibungen der Topologie des autonomen Systems oder Bereichs. Sie vermitteln den Inhalt der Link-State-Datenbank (LSDB) für den Bereich von einem Router zum anderen. Die Kommunikation eines großen LSDB kann verlangen, dass mehrere Nachrichten gesendet werden, indem das Sendegerät als Mastergerät bezeichnet wird und Nachrichten nacheinander gesendet werden, wobei der Slave (Empfänger der LSDB-Informationen) mit Quitten reagiert. Link State Request (LSR) Link State Request Nachrichten werden von einem Router verwendet, um aktualisierte Informationen über einen Teil des LSDB von einem anderen Router zu verlangen. Die Nachricht gibt die Links an, für die das anfragende Gerät aktuellere Informationen wünscht. Link State Update (LSU) Link-state-Update-Nachrichten enthalten aktualisierte Informationen über den Zustand bestimmter Links auf der LSDB. Sie werden als Antwort auf eine Link State Request-Nachricht gesendet, und auch von Routern regelmäßig übertragen oder Multicast. Ihre Inhalte werden verwendet, um die Informationen in den LSDBs von Routern zu aktualisieren, die sie erhalten. Link State Acknowledgment (LSAck) Link-state acknowledgment messages bieten Zuverlässigkeit für den Link-state Exchange Prozess, indem Sie ausdrücklich den Empfang einer Link State Update-Nachricht bestätigen. OSPF-Gebiete Ein OSPF-Netzwerk kann in Bereiche unterteilt werden, die logische Gruppierungen von Hosts und Netzwerken sind. Ein Bereich umfasst seinen Verbindungsrouter mit Schnittstellen, die mit dem Netzwerk verbunden sind. Jeder Bereich hält eine separate Link-State-Datenbank auf, deren Informationen vom Verbindungsrouter zum Rest des Netzes zusammengefasst werden können. So ist die Topologie eines Gebiets außerhalb des Gebiets unbekannt. Dies reduziert den Routing-Verkehr zwischen Teilen eines autonomen Systems. OSPF kann Tausende von Routern behandeln, die sich mehr um das Erreichen der Kapazität der Weiterleitungs-Informationsbasis (FIB)-Tabelle kümmern, wenn das Netzwerk viele Routen und Down-End-Geräte enthält. Moderne Low-End Router haben einen vollen Gigabyte von RAM, die es ihnen ermöglicht, viele Router in einem Bereich zu behandeln 0. Viele Ressourcen beziehen sich auf OSPF-Führer aus über 20 Jahren, wo es beeindruckend war, 64 MB RAM zu haben. Bereiche werden mit 32-Bit-Nummern eindeutig identifiziert. Die Flächenkennungen werden in der aus der IPv4-Adressierung bekannten Punktdezimal-Notation häufig geschrieben. Sie sind jedoch keine IP-Adressen und können ohne Konflikt jede IPv4-Adresse duplizieren. Die Flächenkennungen für IPv6-Implementierungen (OSPFv3) verwenden auch 32-Bit-Kennzeichen, die in derselben Notation geschrieben wurden. Wenn eine gepunktete Formatierung entfällt, erweitern die meisten Implementierungen die Fläche 1 auf die Flächenkennung 0,0.0.1, einige sind jedoch bekannt, sie als 1.0.0.0 zu erweitern. OSPF definiert mehrere spezielle Flächentypen: Rückgratbereich Der Rückgratbereich (auch bekannt als Bereich 0 oder Bereich 0,0.0.0) bildet den Kern eines OSPF-Netzwerks. Alle anderen Bereiche sind mit ihm verbunden, entweder direkt oder über andere Router. Die Inter-Routing erfolgt über Router, die mit dem Backbone-Bereich verbunden sind und mit ihren eigenen zugehörigen Bereichen. Es ist die logische und physische Struktur für die 'OSPF-Domain' und ist an allen Nicht-Null-Bereichen in der OSPF-Domain befestigt. Beachten Sie, dass in OSPF der Begriff Autonomer System Boundary Router (ASBR) historisch ist, in dem Sinne, dass viele OSPF-Domains im gleichen Internet-sichtbaren autonomen System, RFC 1996 koexistieren können. Der Backbone-Bereich ist für die Verteilung von Routing-Informationen zwischen Nicht-Backbone-Bereichen verantwortlich. Das Rückgrat muss zusammenhängend sein, muss aber nicht physisch zusammenhängend sein; Backbone-Konnektivität kann durch die Konfiguration virtueller Links aufgebaut und gepflegt werden. Alle OSPF-Bereiche müssen sich mit dem Rückgratbereich verbinden. Diese Verbindung kann jedoch über eine virtuelle Verbindung erfolgen. Nehmen Sie beispielsweise an, dass der Bereich 0,0.0.1 eine physikalische Verbindung zum Bereich 0,0.0.0 aufweist. Nehmen Sie weiter an, dass der Bereich 0.0.0.2 keine direkte Verbindung zum Rückgrat hat, dieser Bereich jedoch eine Verbindung zum Bereich 0.0.0.1 Bereich 0.0.0.2 hat, kann eine virtuelle Verbindung über den Transitbereich 0.0.0.1 zum Rückgrat verwenden. Um ein Transitgebiet zu sein, muss ein Bereich das Transitattribut haben, so dass es nicht in irgendeiner Weise stubby sein kann. Regelmäßiger Bereich Ein regulärer Bereich ist nur ein nicht-backbone (nonzero) Bereich ohne spezifische Funktion, erzeugen und empfangen Zusammenfassung und externe LSAs. Der Rückgratbereich ist eine besondere Art solcher Fläche. Gebiet Ein Transitbereich ist ein Bereich mit zwei oder mehr OSPF Grenzroutern und wird verwendet, um den Netzverkehr von einem benachbarten Bereich zu einem anderen zu passieren. Der Transitbereich stammt nicht aus diesem Verkehr und ist nicht das Ziel eines solchen Verkehrs. Der Rückgratbereich ist eine spezielle Art von Transitbereich. Stub-Bereich Ein Stub-Bereich ist ein Bereich, der keine Routenanzeigen außerhalb der AS erhält und das Routing aus dem Bereich vollständig auf einer Standardroute basiert. Ein ABR löscht Typ 4, 5 LSAs von internen Routern, sendet ihnen eine Standardroute von 0,0.0.0 und verwandelt sich in ein Standard-Gateway. Dies reduziert LSDB und Routing-Tabellengröße für interne Router. Änderungen des Grundkonzepts des Stub-Bereichs wurden von Systemanbietern, wie dem total stubby-Bereich (TSA) und dem nicht-so-stubby-Bereich (NSSA) durchgeführt, sowohl eine Erweiterung in Cisco Systems Routing-Geräten. Nicht-so-stubby-Bereich Ein nicht-so-stubby-Bereich (NSSA) ist eine Art Stub-Bereich, der autonome System-Außenrouten importieren und in andere Bereiche schicken kann, aber noch nicht AS-externe Routen aus anderen Bereichen empfangen kann. NSSA ist eine Erweiterung des Stub-Bereichs-Features, die die Injektion externer Routen in begrenzter Weise in den Stub-Bereich ermöglicht. Eine Fallstudie simuliert eine NSSA, die sich um das Problem der Stub Area dreht, nicht in der Lage, externe Adressen zu importieren. Es visualisiert folgende Aktivitäten: Der ASBR importiert externe Adressen mit einem Typ 7 LSA, der ABR wandelt einen Typ 7 LSA in Typ 5 um und überflutet ihn in andere Bereiche, der ABR fungiert als ASBR für andere Bereiche. Die ASBRs nehmen nicht Typ 5 LSAs und konvertieren dann in Typ 7 LSAs für die Fläche. Mehrere Anbieter (Cisco, Allied Telesis, Juniper, Alcatel-Lucent, Huawei, Quagga) implementieren die beiden Erweiterungen unten für stub und nicht-so-stubby Bereiche. Obwohl nicht von RFC-Standards abgedeckt, werden sie von vielen als Standardmerkmale bei OSPF-Implementierungen betrachtet. Gesamtfläche Ein völlig stubby Bereich ist ähnlich wie ein Stub Bereich. Dieser Bereich erlaubt jedoch nicht, zusammenfassende Routen zusätzlich zu nicht externen Routen zu haben, d.h. Interarea (IA) Routen sind nicht in völlig stubby Bereiche zusammengefasst. Der einzige Weg für den Verkehr, um außerhalb des Bereichs geroutet zu werden, ist eine Standardroute, die die einzige Art-3 LSA, die in das Gebiet beworben wird. Wenn es nur einen Weg aus dem Bereich gibt, müssen weniger Routing-Entscheidungen durch den Routenprozessor getroffen werden, was die Systemressourcenauslastung senkt. Gelegentlich wird gesagt, dass eine TSA nur einen ABR aufweisen kann. NSSA total stubby Bereich Neben der Standardfunktionalität einer NSSA ist die total stubby NSSA eine NSSA, die die Attribute einer TSA annimmt, d.h. dass die Zusammenfassungsrouten Typ 3 und 4 nicht in diese Art von Bereich überflutet werden. Es ist auch möglich, einen Bereich sowohl völlig stubby als auch nicht-so-stubby zu erklären, was bedeutet, dass der Bereich nur die Standardroute von Bereich 0.0.0.0 erhält, sondern auch einen autonomen Systemgrenzrouter (ASBR) enthalten kann, der externe Routing-Informationen akzeptiert und in den lokalen Bereich einspritzt, und vom lokalen Bereich in Bereich 0.0.0.0. Eine Umverteilung in einen NSSA-Bereich schafft eine spezielle Art von LSA, die nur in einem NSSA-Bereich existieren kann. Ein NSSA ASBR erzeugt diese LSA, und ein NSSA ABR Router übersetzt es in Typ 5 LSA, die in die OSPF-Domain propagiert wird. Eine neu erworbene Tochtergesellschaft ist ein Beispiel dafür, dass ein Gebiet gleichzeitig nicht-so-stubby und total stubby sein kann, wenn der praktische Platz, ein ASBR zu setzen, am Rande eines total stubby Bereichs liegt. In einem solchen Fall sendet der ASBR Äußere in den total stubby Bereich, und sie sind den OSPF-Lautsprechern in diesem Bereich zur Verfügung. Bei der Umsetzung von Cisco lassen sich die externen Routen zusammenfassen, bevor sie in den total stubby Bereich einspritzen. Im Allgemeinen sollte der ASBR nicht standardmäßig in die TSA-NSSA werben, obwohl dies mit äußerst sorgfältigem Design und Betrieb arbeiten kann, für die begrenzten Sonderfälle, in denen eine solche Werbung Sinn macht. Durch die Erklärung des total stubby-Bereichs als NSSA, keine externen Routen aus dem Backbone, außer der Standardroute, geben Sie den Bereich diskutiert. Die Außenseiten erreichen über die TSA-NSSA den Bereich 0.0.0.0, aber keine anderen Routen als die Standardroute geben die TSA-NSSA ein. Router in der TSA-NSSA senden den gesamten Verkehr an die ABR, außer an Strecken, die vom ASBR beworben werden. Router-Typen OSPF definiert die folgenden überlappenden Kategorien von Routern: Interner Router (IR) Ein interner Router hat alle seine Schnittstellen zu demselben Bereich. Gebiet Grenzrouter (ABR) Ein Gebiet Grenzrouter ist ein Router, der eine oder mehrere Bereiche mit dem Hauptrückgratnetz verbindet. Es gilt als Mitglied aller Bereiche, an die es angeschlossen ist. Ein ABR hält mehrere Instanzen der Link-State-Datenbank im Speicher, eine für jeden Bereich, an den dieser Router angeschlossen ist. Backbone Router (BR) Ein Backbone Router hat eine Schnittstelle zum Backbone Bereich. Backbone Router können auch Gebiet Router sein, müssen aber nicht sein. Autonomer Systemgrenzrouter (ASBR) Ein autonomer Systemgrenzrouter ist ein Router, der über mehr als ein Routing-Protokoll verbunden ist und Routing-Informationen mit Routern autonomen Systemen ausgetauscht. ASBRs führen typischerweise auch ein externes Routing-Protokoll (z.B. BGP) oder verwenden statische Routen oder beide. Ein ASBR wird verwendet, um Routen von anderen externen ASs in seinem eigenen autonomen System zu verteilen. Ein ASBR erstellt externe LSA für externe Adressen und überflutet sie über ABR in alle Bereiche. Router in anderen Bereichen verwenden ABRs als nächstes Hopfen, um externe Adressen zu erreichen. Dann leitet ABR Pakete an den ASBR weiter, der die externen Adressen ankündigt. Der Routertyp ist ein Attribut eines OSPF-Prozesses. Ein bestimmter physikalischer Router kann ein oder mehrere OSPF-Prozesse aufweisen. Beispielsweise ist ein Router, der mit mehr als einem Bereich verbunden ist und Routen von einem BGP-Prozess erhält, der mit einem anderen AS verbunden ist, sowohl ein Flächengrenzrouter als auch ein autonomer Systemgrenzrouter. Jeder Router hat eine Kennung, die üblicherweise im punktierten Dezimalformat (z.B. 1.2.3.4) einer IP-Adresse geschrieben wird. Diese Kennung muss in jeder OSPF-Instanz festgelegt werden. Wenn nicht explizit konfiguriert, wird die höchste logische IP-Adresse als Routerkennung dupliziert. Da die Router-Identifizierung jedoch keine IP-Adresse ist, muss sie nicht Teil eines routable Subnetzes im Netzwerk sein und oft keine Verwirrung vermeiden. Router-Attribute Zusätzlich zu den vier Routertypen verwendet OSPF den bezeichneten Router (DR) und den als Router bezeichneten Router (BDR), der Attribute einer Router-Schnittstelle sind. Als Router A bezeichneter Router (DR) ist die Router-Schnittstelle gewählt unter allen Routern auf einem bestimmten Multiaccess-Netzwerksegment, in der Regel angenommen, um Multiaccess zu übertragen. Spezielle Techniken, oft herstellerabhängig, können benötigt werden, um die DR-Funktion auf non-broadcast multiaccess (NBMA) Medien zu unterstützen. Üblicherweise ist es sinnvoll, die einzelnen virtuellen Schaltungen eines NBMA-Subnets als einzelne Punkt-zu-Punkt-Zeilen zu konfigurieren; die verwendeten Techniken sind implementierungsabhängig. Ein als Backup bezeichneter Router (BDR) bezeichneter Router ist ein Router, der zum benannten Router wird, wenn der aktuelle Router ein Problem hat oder ausfällt. Die BDR ist der OSPF-Router mit der zweithöchsten Priorität zum Zeitpunkt der letzten Wahl. Ein vorgegebener Router kann einige Schnittstellen aufweisen, die als (DR) bezeichnet werden und andere, die als Backup bezeichnet werden (BDR), und andere, die nicht bezeichnet werden. Wenn kein Router ein DR oder ein BDR auf einem bestimmten Subnetz ist, wird zunächst die BDR gewählt und dann eine zweite Wahl für die DR abgehalten. Die DR wird nach folgenden Standardkriterien gewählt: Wird die Prioritätseinstellung auf einem OSPF-Router auf 0 gesetzt, so kann es NIE zu einem DR oder BDR werden. Wenn eine DR versagt und die BDR übernimmt, gibt es eine andere Wahl zu sehen, wer die Ersatz-BDR wird. Der Router, der die Hello-Pakete mit der höchsten Priorität sendet, gewinnt die Wahl. Wenn zwei oder mehr Router mit der höchsten Prioritätseinstellung zusammenhängen, gewinnt der Router, der den Hallo mit der höchsten RID (Router ID) sendet. HINWEIS: Eine RID ist die höchste logische (Loopback-)IP-Adresse, die auf einem Router konfiguriert ist, wenn keine logische/Loopback-IP-Adresse gesetzt wird, dann verwendet der Router die höchste IP-Adresse, die auf seinen aktiven Schnittstellen konfiguriert ist (z.B. 192.168.0.1 wäre höher als 10.1.1.2) Normalerweise wird der Router mit der zweithöchsten Prioritätsnummer zum BDR. Die Prioritätswerte liegen zwischen 0 – 255, wobei ein höherer Wert seine Chancen auf DR oder BDR erhöht. Kommt ein höherrangiger OSPF-Router nach der Wahl online, wird er nicht DR oder BDR werden, bis (mindestens) die DR und BDR ausfallen. Wenn die aktuelle DR "abwärts" geht, wird die aktuelle BDR zum neuen DR und eine neue Wahl findet statt, um eine weitere BDR zu finden. Wenn die neue DR dann "abwärts" und die ursprüngliche DR jetzt verfügbar ist, wird noch vorher gewählte BDR DR. DR gibt es, um den Netzverkehr zu reduzieren, indem es eine Quelle für Routing-Updates zur Verfügung stellt. Die DR hält eine komplette Topologietabelle des Netzwerks aufrecht und sendet die Updates über Multicast an die anderen Router. Alle Router in einem Multi-Access-Netzwerksegment bilden eine Slave/Master-Beziehung mit der DR. Sie werden mit der DR und der BDR nur Adjazenzen bilden. Jedes Mal, wenn ein Router ein Update sendet, sendet es an die DR und BDR auf der Multicast-Adresse 224.0.0.6 Die DR sendet dann das Update an alle anderen Router im Bereich an die Multicast-Adresse 224.0.0.5 Auf diese Weise müssen sich alle Router nicht ständig aktualisieren und können vielmehr alle ihre Updates von einer einzigen Quelle erhalten. Der Einsatz von Multicasting reduziert die Netzlast weiter. DRs und BDRs werden immer auf OSPF-Broadcast-Netzwerken eingerichtet/gewählt. DR kann auch in NBMA (Non-Broadcast Multi-Access) Netzwerken wie Frame Relay oder ATM gewählt werden. DR oder BDRs werden nicht auf Punkt-zu-Punkt-Verbindungen (z.B. Punkt-zu-Punkt-WAN-Verbindung) gewählt, da die beiden Router auf beiden Seiten der Verbindung vollständig benachbart werden müssen und die Bandbreite zwischen ihnen nicht weiter optimiert werden kann. DR- und Nicht-DR-Router entwickeln sich von 2-Wege zu vollen Adjacency-Beziehungen durch den Austausch von DD, Request und Update. Die Routing Metriken OSPF nutzen Pfadkosten als Basis-Routing Metrik, die durch den Standard definiert wurde, nicht zu einem Standardwert wie Geschwindigkeit gleichzusetzen, so dass der Netzdesigner eine für das Design wichtige Metrik auswählen konnte. In der Praxis wird sie durch Vergleich der Geschwindigkeit der Schnittstelle mit einer Referenzbandbreite für den OSPF-Prozess bestimmt. Die Kosten werden durch Division der Referenzbandbreite durch die Schnittstellengeschwindigkeit bestimmt (obwohl die Kosten für jede Schnittstelle manuell übergeordnet werden können). Wird eine Referenzbandbreite auf 10000 eingestellt, so hat ein 10 Gbit/s Link einen Kostenaufwand von 1. Die Geschwindigkeiten unter 1 sind auf 1 gerundet. Hier ist eine Beispieltabelle, die die Routing Metrik oder "Kostenberechnung" auf einer Schnittstelle zeigt. OSPF ist ein Layer-3-Protokoll: Ist zwischen den beiden Geräten mit OSPF ein Layer-2-Schalter, kann eine von der anderen Seite verschiedene Geschwindigkeit aushandeln. Dies kann eine asymmetrische Routing auf dem Link verursachen (Router 1 zu Router 2 könnte 1 kosten und der Rückweg könnte 10 kosten), was zu unbeabsichtigten Folgen führen kann. Metriken sind jedoch nur bei gleicher Art direkt vergleichbar. Vier Arten von Metriken werden erkannt. In abnehmender Vorliebe sind diese Typen (z.B. eine Intra-Flächenroute ist immer bevorzugt auf eine externe Route unabhängig von der Metrik:) Intra-area Inter-area Externer Typ 1, der sowohl die externen Pfadkosten als auch die Summe der internen Pfadkosten zum ASBR umfasst, die die Route annoncieren, Externer Typ 2, dessen Wert allein der externen Pfadkosten ist, führt die OSPF v3 OSPF Version 3 Modifikationen zur IPv4-Implementierung des Protokolls ein. Abgesehen von virtuellen Links verwenden alle Nachbarbörsen ausschließlich IPv6-Link-lokale Adressierung. Das IPv6-Protokoll läuft pro Link statt auf Basis des Subnetzes. Alle IP-Prefix-Informationen wurden aus den Link-state-Anzeigen und aus dem hallo-Entdeckungspaket entfernt, das OSPFv3 im Wesentlichen protokollunabhängig macht. Trotz der erweiterten IP-Adresse auf 128-Bit in IPv6 basieren Flächen- und Router-Identifikationen immer noch auf 32-Bit-Nummern. OSPF Erweiterungen Verkehrstechnik OSPF-TE ist eine Erweiterung auf OSPF, die die Ausdruckskraft erweitert, um die Verkehrstechnik und den Einsatz in Nicht-IP-Netzen zu ermöglichen. Mit OSPF-TE können weitere Informationen über die Topologie mit opaken LSA mit Typ-Längen-Wert-Elementen ausgetauscht werden. Diese Erweiterungen ermöglichen es OSPF-TE, vollständig aus Band des Datenebenennetzes auszulaufen. Dies bedeutet, dass es auch in Nicht-IP-Netzwerken, wie optischen Netzwerken, eingesetzt werden kann. OSPF-TE wird in GMPLS-Netzwerken als Mittel zur Beschreibung der Topologie verwendet, über die GMPLS-Pfade aufgebaut werden können. GMPLS verwendet eigene Pfad-Setup- und -weiterleitungsprotokolle, sobald es die gesamte Netzwerkkarte hat. Im Resource Reservation Protocol (RSVP) wird OSPF-TE zur Aufnahme und Überschwemmung von RSVP signalisierte Bandbreitenreservierungen für Label Switched Paths innerhalb der Link-State-Datenbank verwendet. Optische Routing RFC 3717 Dokumente arbeiten in der optischen Routing für IP basierend auf Erweiterungen zu OSPF und IS-IS. Multicast Open Shortest Path First Das Multicast Open Shortest Path First (MOSPF) Protokoll ist eine Erweiterung auf OSPF, um Multicast Routing zu unterstützen. MOSPF ermöglicht es Routern, Informationen über Gruppenmitglieder zu teilen. OSPF in Rundfunk- und Rundfunknetzen Bei der Übertragung von Vielseitigkeitsnetzwerken wird die benachbarte Adjacency dynamisch mit Multicast-Hallo-Paketen zu 224.0.0.5 A DR und BDR gewählt und normalerweise funktionieren. Für Nicht-Broadcast-Multi-Access-Netzwerke (NBMA) werden die folgenden beiden offiziellen Modi definiert: non-broadcast point-to-multipoint Cisco hat die folgenden drei zusätzlichen Modi für OSPF in NBMA-Topologien definiert: Punkt-zu-multipoint non-broadcast send point-to-point Allied Telesis implementiert OSPFv2 & OSPFv3 in Allied Ware Plus (AW)+ Arista Networks implementiert OSPFv2 und OSPFv3 BIRD implementiert sowohl OSPFv2 als auch OSPFv3 Cisco IOS und NX-OS Cisco Meraki D-Link implementiert OSPFv2 auf Unified Services Router. Dells FTOS implementiert OSPFv2 und OSPFv3 ExtremeXOS GNU Zebra, eine GPL Routing-Suite für Unix-ähnliche Systeme, die OSPF Juniper Junos NetWare unterstützt, implementiert OSPF in seinem Multi Protocol Routing-Modul. OpenBSD beinhaltet OpenOSPFD, eine OSPFv2-Implementierung. Quagga, eine Gabel von GNU Zebra für Unix-ähnliche Systeme XORP, eine Routing-Suite, die RFC2328 (OSPFv2) und RFC2740 (OSPFv3) für IPv4 und IPv6 Windows NT 4.0 Server, Windows 2000 Server und Windows Server 2003 implementierte OSPFv2 im Routing und Remote Access Service, obwohl die Funktionalität im Windows Server 2008 entfernt wurde. Anwendungen OSPF ist ein weit verbreitetes Routing-Protokoll, das ein Netzwerk in wenigen Sekunden konvergieren und schleifenfreie Pfade garantieren kann. Es hat viele Merkmale, die die Einführung von Richtlinien über die Verbreitung von Strecken erlauben, dass es angebracht sein kann, lokal zu halten, für Lastenteilung und für selektive Routenimporte. IS-IS hingegen kann in einem stabilen Netz auf niedrigere Oberleitung abgestimmt werden, die in ISP häufiger als Unternehmensnetze. Es gibt einige historische Unfälle, die IS-IS zum bevorzugten IGP für ISPs gemacht, aber ISPs heute können gut wählen, um die Merkmale der jetzt effizienten Implementierungen von OSPF zu nutzen, nachdem zuerst die Pros und Kons von IS-IS in Service Provider-Umgebungen betrachtet. OSPF kann eine bessere Lastverteilung auf externen Links als andere IGPs bieten. Wenn die Standardroute zu einem ISP von mehreren ASBRs als externe Route Typ I in OSPF eingespritzt wird und die gleichen externen Kosten angegeben werden, gehen andere Router zum ASBR mit den geringsten Pfadkosten von seinem Standort. Dies kann durch Anpassung der externen Kosten weiter abgestimmt werden. Wenn die Standardroute aus verschiedenen ISPs mit unterschiedlichen externen Kosten injiziert wird, wird als externe Route Typ II der kostengünstige Standard zum primären Ausgang und der höhere Kosten wird nur zur Sicherung. Der einzige reale Begrenzungsfaktor, der große ISPs zwingen kann, IS-IS über OSPF auszuwählen, ist, wenn sie ein Netzwerk mit mehr als 850 Routern haben. Siehe auch Fabric Shortest Path First Mesh Networking Route Analytics Routing Shortest Path Bridging Shortest path problem Referenzen Weiter lesen Colton, Andrew (Oktober 2003.) OSPF für Cisco Routers. Rocket Science Press. ISBN 978-0972286213. Doyle, Jeff; Carroll, Jennifer (2005.) Routing TCP/IP. 1 (2. ed.) Cisco Press. ISBN 978-1-58705-202-6. Moy, John T. (1998.) OSPF: Anatomie eines Internet Routing-Protokolls. Addison-Wesley. ISBN 978-0201634723. Parkhurst, William R. (2002.) Cisco OSPF Befehl und Konfiguration Handbuch. ISBN 978-1-58705-071-8. Basu, Anindya; Riecke, Jon (2001.) "Stabilitätsfragen im OSPF-Routing". Verfahren der 2001 Konferenz über Anwendungen, Technologien, Architekturen und Protokolle für die Computerkommunikation. CiteSeerX 10.1.1.99.6393 doi:10.1145/383059.383077 ISBN 978-1-58113-411-7. S2CID 7555753. Valadas, Rui (2019.) OSPF und IS-IS: Vom Link State Routing Principles bis zu Technologien. CRC Press. doi:10.1201/9780429027543 ISBN 9780429027543. Externe Links IETF OSPF Arbeitsgruppe Cisco OSPF Cisco OSPF Bereiche und virtuelle Links Zusammenfassung der OSPF v2 OSPF Router Startup Flow "Konfigurieren von OSPF Authentication". Tech-Tipps. Netcordia. Archiviert vom Original am 26. Februar 2013.