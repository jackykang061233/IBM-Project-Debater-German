Botschaft Queuing Telemetrie Verkehr oder MQTT ist ein leicht zugängliches, Veröffentlichungs-Netzwerkprotokoll, das die Kommunikation zwischen Geräten fördert. In der Regel läuft das Protokoll über das iPhone/IP; allerdings können jedes Netzwerkprotokoll, das bestellt, verlustlose, bidirektionale Verbindungen bietet, MQTT unterstützen. Es ist für Verbindungen mit abgelegenen Orten bestimmt, in denen ein kleiner Code-Fußabdruck erforderlich ist oder die Netzbreite begrenzt ist. Das Protokoll ist ein offener OASIS-Standard und eine ISO-Empfehlung (ISO/IEC 20922). Geschichte Andy Stanford-Clark (IBM) und Arlen Nipper (Beschäftigung für Eurotech, Inc.). genehmigte 1999 die erste Version des Protokolls. Im Rahmen der SCADA wurden Ölleitungen überwacht. Ziel war es, ein Protokoll zu haben, das Bandbreiteneffizienz, leichte und wenig Batteriekraft ist, weil die Geräte über den Satellitenanschluss verbunden waren, der damals extrem teuer war. IBM legte im Jahr 2013 MQTT v3.1 dem OASIS-Spezifikationsgremium mit einer Charter vor, die nur geringfügige Änderungen der Spezifikation gewährleistet. MQTT-SN (MQTT für Sensornetze) ist eine Änderung des wichtigsten Protokolls, das auf batteriebetriebene eingebettete Geräte für nicht-TCP/IP-Netze wie Zigbee abzielt. Nach Erhalt der Norm von IBM wurde die Version 3.1.1 mit geringfügigen Änderungen am 29.10.2014 als OASIS-Norm freigegeben. März 2019 wurde eine umfangreichere Modernisierung der MQTT-Version 5, die mehrere neue Merkmale hinzugefügt hat, veröffentlicht. Historisch kam die MQ in MQTT aus der IBM MQ (then MQSeries) MQ Produktlinie. Jedoch bietet das Protokoll Veröffentlichungen und Abonnenten (keine Warteschlangen, trotz des Namens) und wurde speziell für ressourcengebundene Geräte und niedrige Bandbreiten, hochverzögerte Netze, wie z.B. die Schaltstellen und Satellitenverbindungen konzipiert. In der von IBM als Version 3.1 geöffneten Spezifikation wurde das Protokoll als "MQ Telemetrie Transport" in den abstrakten und urheberrechtlichen Abschnitten bezeichnet, aber die acronyme MQTT wurde im Text der Spezifikation ausführlich verwendet. Zusätzlich über den Draht im CONNECT-Kontrollpaket wurde er als MQIsdp (MQ Integrator SCADA-Systemprotokoll) bezeichnet. Künftige Versionen von OASIS beziehen sich streng auf das Protokoll als nur MQTT, obwohl der technische Ausschuss selbst „OASIS Botschaft Queuing Telemetrie Transport Technical Committee“ genannt wird. Übersicht In dem MQTT-Protokoll werden zwei Arten von Netzeinheiten definiert: ein Kommunikationsmakler und eine Reihe von Kunden. MQTT Broker ist ein Server, der alle Botschaften der Kunden erhält und dann die Botschaften an die entsprechenden Reisezielkunden ausführt. Ein MQTT-Kunden ist ein Gerät (von einem Mikro-Betreiber bis zu einem vollwertigen Server), das eine MQTT-Bibliothek betreibt und an einen MQTT-Broker über ein Netzwerk angeschlossen. Informationen werden in einer Reihe von Themen organisiert. Wenn ein Verleger einen neuen Datenposten hat, sendet er eine Kontrollbotschaft mit den Daten an den angeschlossenen Makler. Der Makler verteilt die Informationen dann an alle Kunden, die sich diesem Thema angeschlossen haben. Der Verleger muss keine Daten über die Anzahl oder den Ort der Abonnenten haben, und die Abonnenten müssen wiederum nicht mit Daten über die Verlegern ausgestaltet werden. Wenn ein Makler eine Botschaft zu einem Thema erhält, für das es keine aktuellen Abonnenten gibt, lehnt der Broker die Botschaft ab, es sei denn, der Verleger der Botschaft bezeichnete die Botschaft als eine gespeicherte Botschaft. Eine gespeicherte Botschaft ist eine normale MQTT-Nachricht mit der zu wahrenden Flagge. Der Broker speichert die letzte gespeicherte Botschaft und die entsprechenden QoS für das ausgewählte Thema. Jeder Kunde, der sich an ein Themamuster anschließt, das dem Thema der gespeicherten Botschaft entspricht, erhält die gespeicherte Botschaft unmittelbar nach der Anmeldung. Die Broker speichert nur eine gespeicherte Botschaft pro Thema. Hierdurch können neue Abonnenten ein Thema erhalten, um den aktuellen Wert zu erhalten anstatt auf die nächste Aktualisierung durch einen Verleger abzuwarten. Wenn ein Veröffentlichungskunden zuerst an den Makler angebunden ist, kann er eine Standardbotschaft einrichten, die an Abonnenten gesendet werden soll, wenn der Broker feststellt, dass der Verlagskunden unerwartet vom Makler getrennt hat. Kunden interagieren nur mit einem Makler, aber ein System kann mehrere Broker-Server enthalten, die Daten austauschen, die auf ihren aktuellen Themen basieren. Eine minimale MQTT-Kontrollbotschaft kann so wenig wie zwei von Daten sein. Eine Kontrollbotschaft kann bei Bedarf fast 256 Megabyte von Daten durchführen. Es gibt vierzehn definierte Nachrichtentypen, die verwendet werden, um einen Kunden von einem Makler zu verbinden, Daten zu veröffentlichen, den Erhalt der Daten zu erkennen und die Verbindung zwischen Kunden und Server zu überwachen. MQTT stützt sich auf das Protokoll über die Datenübermittlung. MQTT-SN wird über andere Transporte wie UDP oder Bluetooth verwendet. MQTT sendet Verbindungsnachweise im einfachen Textformat und enthält keine Maßnahmen für Sicherheit oder Authentifizierung. Durch die Verwendung von TLS können die übertragenen Informationen vor Überwachung, Änderung oder Fälschung verschlüsselt und geschützt werden. Kein entschlüsselter MQTT Hafen ist 1883. Der verschlüsselte Hafen ist 8883. MQTT Broker Der MQTT Broker ist eine Software, die auf einem Computer (unter den Vorständen oder in der Cloud) läuft, und könnte von einem Dritten selbst gebaut oder organisiert werden. Es ist sowohl in Open-Source- als auch in urheberrechtlich geschützten Umsetzungen verfügbar. MQTT verwendet nicht die Adresse des geplanten Empfängers, sondern nutzt die „Topic“ und alle, die eine Kopie dieser Botschaft wünschen, werden sich diesem Thema anschließen. Multiple Kunden können die Botschaft eines einzigen Maklers (eine zu vielen Fähigkeiten) erhalten. Multiple Verlage können auch Themen an einen einzigen Abonnenten veröffentlichen (many to one). Jeder Kunde kann sowohl Daten als auch Daten von der Veröffentlichung produzieren und erhalten, d. h. die Geräte können Sensordaten veröffentlichen und die Konfigurationsinformationen oder Kontrollbefehle (MQTT ist ein bidirektionales Kommunikationsprotokoll). Dies hilft sowohl beim Datenaustausch als auch bei der Verwaltung und Kontrolle von Geräten. Mit MQTT Broker-Architektur werden die Geräte und Anwendungen entkoppelt und sicherer. MQTT verwendet die Verschlüsselung der Verkehrsschicht (TLS) mit dem Benutzernamen, dem Schutz von Passwörtern und freiwilligen Zertifizierungen, die Kunden ein Zertifikat übermitteln müssen, das mit dem Server übereinstimmt. Die Kunden wissen nicht von der IP-Adresse der anderen. Bei Ausfall einer einzigen Quelle verfügen Broker-Software und Kunden über eine automatische Übergabe an Redundant/automatische Backmakler. Der Sicherungsmakler kann auch eingerichtet werden, um die Last von Kunden über mehrere Server vor Ort, Cloud oder die Kombination beider Server zu teilen. Der Makler kann sowohl Standard-MQTT als auch MQTT für die Konformitätsspezifikationen wie z.B. Funkteltel unterstützen, kann gleichzeitig mit demselben Server und mit denselben Sicherheitsniveau durchgeführt werden. Der Makler kann die Daten in Form von gespeicherten Nachrichten speichern (die mit dem Datenzugriff auf die Datenbankkunden verbunden sind), damit neue Abonnenten in das Thema sofort den letzten Wert bekommen können. Der Vermittlungsbeauftragte hält auch alle Informationen der Sitzung an, da die Geräte auf und von „inkonsistenten Sitzungen“ gehen. Hauptvorteile von MQTT Broker sind: Beseitigung gefährdeter und unsicherer Kundenverbindungen Kann leicht von einem einzigen Gerät bis Tausende verwalten und alle Kundenverbindungsstaaten, einschließlich Sicherheitsbescheinigungen und Zertifikaten, bedienen, ohne die Sicherheit (Zell- oder Satellitennetz) zu gefährden Nachrichtentypen schließen eine Verbindung mit dem Server aus und schaffen einen Link zwischen den Knoten. Links für den MQTT-Kunden warten, um jegliche Arbeit zu beenden, die es zu tun hat, und für die Sitzung im Rahmen von SMS/IP. Veröffentlichung des Antrags unverzüglich an den Antragsführer nach dem Verlassen des Antrags an den MQTT-Kunden. MQTTv5.0In 2019 veröffentlichte OASIS den offiziellen MQTT 5.0-Standard. Version 5.0 enthält folgende wichtige neue Merkmale: Grundregeln: Anerkennungen unterstützen nun Rückführungscodes, die einen Grund für ein Scheitern darstellen. Gemeinsame Abonnements: Ermöglichen Sie eine ausgewogene Last für alle Kunden und verringern damit das Risiko von Lastproblemen Termin: Mitteilungen können ein Ablaufdatum enthalten und werden gelöscht, wenn sie nicht innerhalb dieser Frist geliefert werden. Thema: Der Name eines Themas kann durch eine einheitliche Servicequalität (QoS)Each-Verbindung zum Makler ersetzt werden, die eine Qualität der Servicemaßnahme angeben kann. Diese werden in zunehmendem Maße als Überkopf eingestuft: Letztendlich wird die Botschaft nur einmal übermittelt, und der Kunde und der Broker nehmen keine zusätzlichen Schritte zur Anerkennung der Lieferung (Waffen und Vergessen). Mindestens einmal – die Botschaft wird von dem Absender mehrfach überprüft, bis die Anerkennung erhalten ist (erkennbare Lieferung). genau einmal - der Absender und der Empfänger nehmen in einer Zwei-Stufen-Handbuch an, um sicherzustellen, dass nur eine Kopie der Nachricht erhalten wird (versicherte Lieferung). Dieser Bereich berührt nicht den Umgang mit den zugrunde liegenden SMS-Datenübermittlungen; es wird nur zwischen MQTT-Betreibern und Empfängern verwendet. Anwendungen Mehrere Projekte setzen MQTT beispielsweise durch: OpenHAB die Open-Source-Software Home Automationsplattform ein MQTT verbindlich. Open Geospatial Consortium Sensor Dinge API Standardspezifikation hat eine MQTT-Erweiterung im Standard als zusätzliches Protokoll verbindlich. Es wurde in einem US-amerikanischen Department of Homeland Security IoT Pilot nachgewiesen. Node-RED unterstützt MQTT mit TLS-Nodes als Version 0,14. Home Assistant the Open-Source-Software Home Automationsplattform ist MQTT und bietet vier Optionen für MQTT Broker. ejabberd unterstützt MQTT in der Version 19.02. Skype Foundation verwaltet eine mit MQTT kompatible Funkprotokollspezifikation. Sie baut zusätzlich zu MQTT zusätzliche Anforderungen an Echtzeit-Industrieanwendungen auf. Lesen Sie auch den Vergleich der MQTT-Durchführungsprotokolle für fortgeschrittene Botschaft Queuing (AMQP) Pixel Text Oriented Messaging Protokoll (STOMP)Constrained Application Protocol (CoAP)Verlängerungsprotokoll (XMPP)Apache ActiveMQ IBM MQ Solace PubSub+ KaninchenMQ Verweise auf externe Links offizielle Webseite auf der offiziellen Website des Technischen Ausschusses MQTT Spezifikationen Version 5.0, 2019-03-07: PDF Ausgabe, Version 3.1.1 Plus Errata 01, 2015-12-10: PDF Ausgabe, Version 3.1.1, 2014-10-29: PDF Ausgabe, Version 3.1, 2010: PDF Ausgabe, HTML-Version MQTT-SN Version 1.2, 2013-2014: PDF Ausgabe