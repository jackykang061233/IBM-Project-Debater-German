Bei der Berechnung ist das Internet Message Access Protocol (IMAP) ein Internet-Standard-Protokoll, das von E-Mail-Clients verwendet wird, um E-Mail-Nachrichten von einem Mail-Server über eine TCP/IP-Verbindung abzurufen. IMAP wird durch RFC 3501 definiert. IMAP wurde mit dem Ziel entworfen, eine vollständige Verwaltung eines E-Mail-Box durch mehrere E-Mail-Clients zu ermöglichen, so dass Clients im Allgemeinen Nachrichten auf dem Server hinterlassen, bis der Benutzer sie ausdrücklich gelöscht hat. Ein IMAP-Server hört typischerweise auf der Portnummer 143. IMAP über SSL/TLS (IMAPS) ist die Portnummer 993 zugeordnet. Fast alle modernen E-Mail-Clients und Server unterstützen IMAP, die zusammen mit dem früheren POP3 (Post Office Protocol) die zwei häufigsten Standardprotokolle für E-Mail-Retrieval sind. Viele Web-Mail-Dienstleister wie Gmail und Outlook.com bieten auch Unterstützung für IMAP und POP3. E-Mail-Protokolle Das Internet Message Access Protocol ist ein Application Layer Internet Protokoll, das es einem E-Mail-Client ermöglicht, E-Mail auf einem Remote-Mail-Server zuzugreifen. Die aktuelle Version wird durch RFC 3501 definiert. Ein IMAP-Server hört typischerweise auf dem bekannten Port 143, während IMAP über SSL/TLS (IMAPS) 993 verwendet. eingehende E-Mail-Nachrichten werden an einen E-Mail-Server gesendet, der Nachrichten im E-Mail-Box des Empfängers speichert. Der Benutzer ruft die Nachrichten mit einem E-Mail-Client ab, der eine von einer Reihe von E-Mail-Retrieval-Protokollen verwendet. Während einige Clients und Server bevorzugt herstellerspezifische, proprietäre Protokolle verwenden, unterstützen fast alle POP und IMAP für das Abrufen von E-Mails – so dass viele freie Wahl zwischen vielen E-Mail-Clients wie Pegasus Mail oder Mozilla Thunderbird auf diese Server zugreifen und die Clients mit anderen Servern nutzen können. E-Mail-Clients, die IMAP verwenden, hinterlassen im Allgemeinen Nachrichten auf dem Server, bis der Benutzer sie ausdrücklich gelöscht hat. Diese und andere Eigenschaften des IMAP-Betriebs ermöglichen es mehreren Clients, dieselbe Mailbox zu verwalten. Die meisten E-Mail-Clients unterstützen IMAP zusätzlich zu Post Office Protocol (POP), um Nachrichten abzurufen. IMAP bietet Zugang zum Mail-Speicher. Clients können lokale Kopien der Nachrichten speichern, aber diese gelten als temporäre Cache. Geschichte IMAP wurde 1986 von Mark Crispin als Fernzugriff-Postfach-Protokoll konzipiert, im Gegensatz zu dem weit verbreiteten POP, ein Protokoll zum einfachen Abrufen der Inhalte einer Mailbox. Es ging durch eine Reihe von Iterationen vor der aktuellen VERSION 4rev1 (IMAP4,) wie unten beschrieben: Original IMAP Das Original Interim Mail Access Protocol wurde als Xerox Lisp Machine Client und als TOPS-20 Server implementiert. Es existieren keine Kopien der ursprünglichen Zwischenprotokollspezifikation oder deren Software. Obwohl einige seiner Befehle und Antworten dem IMAP2 ähnlich waren, fehlte dem Zwischenprotokoll das Befehls-Response-Tagging und damit seine Syntax mit allen anderen Versionen des IMAP unvereinbar war. IMAP2Das Zwischenprotokoll wurde schnell durch das in RFC 1064 (1988) definierte Interaktive Mail Access Protocol (IMAP2,) ersetzt und später durch RFC 1176 (1990) aktualisiert. IMAP2 führte das Befehls-/Response-Tagging ein und war die erste öffentlich verteilte Version. IMAP3 IMAP3 ist eine äußerst seltene Variante von IMAP. Es wurde 1991 als RFC 1203 veröffentlicht. Es wurde speziell als Gegenvorschlag an RFC 1176 geschrieben, der selbst Änderungen an IMAP2 vorgeschlagen hat. IMAP3 wurde nie vom Markt akzeptiert. Das IESG reklassifizierte RFC1203 "Interactive Mail Access Protocol - Version 3" 1993 als historisches Protokoll. Die IMAP-Arbeitsgruppe nutzte RFC 1176 (IMAP2) anstatt RFC 1203 (IMAP3) als Ausgangspunkt. IMAP2bis Mit dem Aufkommen von MIME wurde IMAP2 erweitert, um MIME-Körperstrukturen zu unterstützen und Mailbox-Management-Funktionalität (Erschaffen, Löschen, Umbenennen, Nachrichten-Upload) hinzuzufügen, die von IMAP2 fehlte. Diese experimentelle Überarbeitung wurde IMAP2bis genannt; ihre Spezifikation wurde nie in nicht-draft-Form veröffentlicht. Ein Internet-Entwurf von IMAP2bis wurde im Oktober 1993 von der IETF IMAP Arbeitsgruppe veröffentlicht. Dieser Entwurf basiert auf folgenden früheren Spezifikationen: unveröffentlichtes IMAP2bis.TXT-Dokument, RFC 1176 und RFC 1064 (IMAP2). Der IMAP2bis.TXT Entwurf dokumentierte den Stand der Erweiterungen auf IMAP2 ab Dezember 1992. Frühe Versionen von Pine wurden weit verbreitet mit IMAP2bis Unterstützung (Pine 4.00 und später unterstützt IMAP4rev1.) IMAP4Eine IMAP Arbeitsgruppe, die Anfang der 1990er Jahre im IETF gegründet wurde, übernimmt die Verantwortung für das IMAP2bis Design. Die IMAP WG beschloss, IMAP2bis auf IMAP4 umzubenennen, um Verwirrung zu vermeiden. Vorteile gegenüber POP Connected und Trennmodi Bei der Verwendung von POP verbinden sich Clients typischerweise kurz mit dem E-Mail-Server, nur solange es benötigt, um neue Nachrichten herunterzuladen. Bei der Verwendung von IMAP4 bleiben Clients oft verbunden, solange die Benutzeroberfläche aktiv ist und Nachrichteninhalte auf Anfrage herunterladen. Für Benutzer mit vielen oder großen Nachrichten kann dieses IMAP4-Nutzungsmuster zu schnelleren Ansprechzeiten führen. Mehrere gleichzeitige Clients Das POP-Protokoll erfordert, dass der aktuell angeschlossene Client der einzige Client ist, der an die Mailbox angeschlossen ist. Demgegenüber ermöglicht das IMAP-Protokoll speziell den gleichzeitigen Zugriff mehrerer Clients und bietet den Clients Mechanismen zur Erkennung von Änderungen, die von anderen, gleichzeitig angeschlossenen Clients an die Mailbox vorgenommen werden. Siehe z.B. RFC 3501 Abschnitt 5.2, der spezifisch "simultane Zugriff auf das gleiche Postfach durch mehrere Agenten" zitiert. Zugriff auf MIME-Nachrichtenteile und Teil-Fetch Üblicherweise werden alle Internet-E-Mails im MIME-Format übertragen, so dass Nachrichten eine Baumstruktur haben, in der die Blatt-Knoten eine Vielzahl von Einzelteil-Inhaltetypen sind und die Nicht-Blatt-Knoten eine Vielzahl von Multipart-Typen sind. Das IMAP4-Protokoll ermöglicht es Kunden, die einzelnen MIME-Teile getrennt abzurufen und auch Teile von einzelnen Teilen oder der gesamten Nachricht abzurufen. Diese Mechanismen ermöglichen es den Clients, den Textteil einer Nachricht abzurufen, ohne die beigefügten Dateien abzurufen oder Inhalte zu streamen, wenn sie abgeholt werden. Informationen zum Status Durch die Verwendung von im IMAP4-Protokoll definierten Fahnen können Clients den Nachrichtenzustand verfolgen: zum Beispiel, ob die Nachricht gelesen, geantwortet oder gelöscht wurde. Diese Flags werden auf dem Server gespeichert, so dass unterschiedliche Clients, die zu unterschiedlichen Zeiten auf dieselbe Mailbox zugreifen, Zustandsänderungen von anderen Clients erkennen können. POP bietet keinen Mechanismus für Clients, solche Zustandsinformationen auf dem Server zu speichern, so dass, wenn ein einzelner Benutzer auf eine Mailbox mit zwei verschiedenen POP-Clients (zu verschiedenen Zeiten) Zustandsinformationen zugreift - wie etwa ob eine Nachricht aufgerufen wurde - nicht zwischen den Clients synchronisiert werden kann. Das IMAP4-Protokoll unterstützt sowohl vordefinierte System-Flags als auch clientdefinierte Keywords. System-Flags geben an, ob eine Nachricht gelesen wurde. Keywords, die nicht von allen IMAP-Servern unterstützt werden, ermöglichen es, Nachrichten einem oder mehreren Tags zu erhalten, deren Bedeutung dem Client entspricht. IMAP-Keywords sollten nicht mit proprietären Labels von webbasierten E-Mail-Diensten verwechselt werden, die manchmal von den entsprechenden proprietären Servern in IMAP-Ordner übersetzt werden. Mehrere Mailboxen auf dem Server IMAP4 Clients können Mailboxen (in der Regel dem Benutzer als Ordner) auf dem Server erstellen, umbenennen und/oder löschen und Nachrichten zwischen Mailboxen kopieren. Mehrere Mailbox-Unterstützung ermöglicht Servern auch Zugriff auf freigegebene und öffentliche Ordner. Die IMAP4 Access Control List (ACL) Extension (RFC 4314) kann zur Regelung der Zugriffsrechte verwendet werden. Serverseitige Suchanfragen IMAP4 bietet einen Mechanismus für einen Client, um den Server zu bitten, nach Nachrichten zu suchen, die eine Vielzahl von Kriterien erfüllen. Dieser Mechanismus verhindert, dass Clients jede Nachricht in der Mailbox herunterladen müssen, um diese Suchanfragen durchzuführen. Eingebauter Erweiterungsmechanismus In Bezug auf die Erfahrungen früherer Internet-Protokolle definiert IMAP4 einen expliziten Mechanismus, mit dem er erweitert werden kann. Viele IMAP4-Erweiterungen zum Basisprotokoll wurden vorgeschlagen und werden gemeinsam genutzt. IMAP2bis hatte keinen Erweiterungsmechanismus, und POP hat jetzt einen von RFC 2449 definiert. Nachteile Während IMAP viele der Mängel der POP beseitigt, führt dies inhärent zusätzliche Komplexität ein. Ein Großteil dieser Komplexität (z.B. mehrere Clients, die gleichzeitig auf dieselbe Mailbox zugreifen) wird durch serverseitige Workarounds wie Maildir oder Datenbank-Backends kompensiert. Die IMAP-Spezifikation wurde kritisiert, dass sie unzureichend streng ist und Verhaltensweisen erlaubt, die ihre Nützlichkeit effektiv vernachlässigen. In der Spezifikation heißt es beispielsweise, dass jede auf dem Server gespeicherte Nachricht eine "einzigartige id" hat, um den Clients zu ermöglichen, Nachrichten zu identifizieren, die sie bereits zwischen Sitzungen gesehen haben. Die Spezifikation erlaubt jedoch auch, dass diese UIDs ohne Einschränkungen ungültig gemacht werden und ihren Zweck praktisch besiegen. Sofern der Mail-Speicher und die Suche Algorithmen auf dem Server sorgfältig durchgeführt werden, kann ein Client bei der Suche nach massiven Mailboxen möglicherweise große Mengen an Serverressourcen verbrauchen. IMAP4-Clients müssen eine TCP/IP-Verbindung zum IMAP-Server pflegen, um über die Ankunft neuer Posten informiert zu werden. Die Benachrichtigung der Postankunft erfolgt durch In-Band-Signalisierung, die zur Komplexität der kundenseitigen IMAP-Protokollbehandlung beiträgt. Ein privater Vorschlag, Push IMAP, würde IMAP erweitern, um Push-E-Mail zu implementieren, indem Sie die gesamte Nachricht anstelle nur eine Benachrichtigung senden. Push IMAP wurde jedoch nicht allgemein akzeptiert und die aktuelle IETF-Arbeit hat das Problem auf andere Weise angesprochen (siehe das Lemonade-Profil für weitere Informationen). Im Gegensatz zu einigen proprietären Protokollen, die Sende- und Abrufvorgänge kombinieren, eine Nachricht senden und eine Kopie in einem serverseitigen Ordner mit einem Basis-Level IMAP-Client speichern, erfordert die Übertragung des Nachrichteninhalts zweimal, einmal an SMTP für die Lieferung und ein zweites Mal an IMAP, um in einem gesendeten Mail-Ordner zu speichern. Dies wird durch eine Reihe von Erweiterungen, die durch das IETF-Lemonade-Profil für mobile Geräte definiert sind, angesprochen: URLAUTH (RFC 4467) und CATENATE (RFC 4469) in IMAP und BURL (RFC 4468) in SMTP-SUBMISSION. Darüber hinaus bietet Courier Mail Server eine nicht standardmäßige Methode zum Senden mittels IMAP durch Kopieren einer ausgehenden Nachricht in einen dedizierten Ordner. Sicherheit Um IMAP-Verbindungen kryptographisch zu schützen, kann IMAPS auf TCP-Port 993 verwendet werden, was SSL/TLS verwendet. Ab Januar 2018 ist TLS der empfohlene Mechanismus. Alternativ kann STARTTLS verwendet werden, um eine sichere Kommunikation zwischen der MUA zu ermöglichen, die mit der MSA oder MTA über das SMTP-Protokoll kommuniziert. Dialogbeispiel Dies ist ein Beispiel IMAP-Verbindung aus RFC 3501 Abschnitt 8: C: <open-Verbindung> S: * OK IMAP4rev1 Service Ready C: a001 login mrc Geheimnis S: a001 OK LOGIN abgeschlossen C: a002 select inbox S: * 18 EXISTS S: * FLAGS (\Angemeldet \Flagged \Deleted \Seen \Draft) S: * 2 RECENT S: * OK [UNSEEN 17] Nachricht 17 ist die erste ungesehene Nachricht S: * OK [UIDVALIDITY 3857529045] UIDs gültig S: a002 OK [READ-WRITE] SELECT abgeschlossen C: a003 fetch 12 full S: * 12 FETCH (FLAGS (\Seen) INTERNALDATE "17-Jul-1996 02:44:25 -0700" RFC822.SI 4286 ENVELOPE ("Wed, 17 Jul 1996 02:23:25 -0700 (PDT)" "IMAP4rev1 WG mtgry grey and minute" ("Terry Gray" NIL grau cac.washington.edu) ("Terry Gray" NIL grau cac.washington.edu) (NIL NIL imap cac.washington.edu) (NIL NIL Minuten CNRI.Reston.VA.US ("John Klensin" NIL KLENSIN MIT.EDU")) NIL NIL <B27397-0100000@cac.washington.edu)> BODY (TEXT PLAIN (CHARSET US-ASCII)NIL NIL 7BIT 3028 92) S: a003 OK FETCH vollendet C: a004 fetch 12 body[header] S: * 12 FETCH (BODY[HEADER] {342} S: Datum: Wedington, 17 Jul 1996 02:23:25 -0700 (PDT) S: Betreff: IMAP4rev1 WG mtg Zusammenfassung und Minuten S: To: imap@cac.washington.edu S: cc: minutes@CNRI.Reston.VA. US, John Klensin <KLENSIN@MIT.EDU> S: Nachricht-Id: <B27397-0100000@cac.washington.edu> S: MIME-Version: 1.0 S: Content-Typ: TEXT/PLAIN; CHARSET=US-ASCII S: S: ) S: a004OK FETCH abgeschlossen C a005 Speicher 12 +Flags \deleted S: * 12 FETCH (FLAGS (\Seen \Deleted) S: a005 OK+FLAGS abgeschlossen C: a006 Logout S: * BYE IMAP4rev1 Server endet Verbindung S: a006 OK LOGOUT abgeschlossen Siehe auch Liste der Mailserver-Software Vergleich der E-Mail-Clients Vergleich der Mailserver IMAP IDLE JSON Meta Application Protocol (JMAP)Post Office Protocol (POP) Push-IMAPSimple Mail-Zugangsprotokoll Einfache Mail Transfer Protokoll Webmail Referenzen Weiter lesen Crispin, Mark (1988–2016)."Zehn Gebote wie man einen IMAP-Client schreibt". University of Washington. Archiviert vom Original am 2016-08-29.Retrieved 2018-11-02.Heinlein, P; Hartleben, P (2008). Das Buch von IMAP:Building a Mail Server mit Courier und Cyrus. No Starch Press.ISBN 978-1-59327-177-0.Hughes, L (1998). Internet-E-Mail-Protokolle, Standards und Implementierung. Artech House Publishers.ISBN 0-89006-939-5.Johnson, K (2000). Internet E-Mail Protokolle: A Developer's Guide.Addison-Wesley Professional.ISBN 0-201-43288-9.Loshin, P (1999). " Grundlegende E-Mail Normen: RFCs und Protokolle sind praktisch." Programmierung Internet Mail.O'Reilly.ISBN 1-56592-479-7. Externe Links "IMAP Protocol Mailing List". RFC 3501 — Spezifikation der IMAP Version 4 Revision 1 RFC 2683 — IMAP Implementierungsvorschläge RFC RFC 2177 — IMAP4 IDLE Befehl