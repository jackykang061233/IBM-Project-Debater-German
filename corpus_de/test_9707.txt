USB On-The-Go (USB OTG oder nur OTG) ist eine Spezifikation, die erstmals Ende 2001 verwendet wird, mit der USB-Geräte, wie Tablets oder Smartphones, als Host fungieren können, so dass andere USB-Geräte, wie USB-Flash-Laufwerke, Digitalkameras, Maus oder Tastaturen, an ihnen befestigt werden können. Mit der Verwendung von USB OTG können diese Geräte zwischen den Rollen von Host und Gerät hin und her wechseln. Ein Mobiltelefon kann aus abnehmbaren Medien als Host-Gerät lesen, präsentiert sich aber als USB-Masse-Speichergerät, wenn es mit einem Host-Computer verbunden ist. USB OTG stellt das Konzept eines Gerätes vor, das sowohl Master- als auch Slave-Rollen durchführt – wenn zwei USB-Geräte angeschlossen sind und eines davon ein USB OTG-Gerät ist, stellen sie eine Kommunikationsverbindung her. Das die Verbindung steuernde Gerät wird als Master oder Host bezeichnet, während das andere als Slave oder Peripherie bezeichnet wird. USB OTG definiert zwei Rollen für Geräte: OTG A-Device und OTG B-Device, die angeben, welche Seite dem Link Strom liefert, und welche zunächst der Host ist. Das OTG A-Gerät ist ein Energieversorger und ein OTG B-Gerät ist ein Stromverbraucher. In der Standard-Link-Konfiguration fungiert das A-Gerät als USB-Host mit dem als USB-Peripherie wirkenden B-Gerät. Die Host- und Peripherie-Modi können später mit Host Negotiation Protocol (HNP) ausgetauscht werden. Die Anfangsrolle jedes Gerätes wurde definiert, durch die ein Benutzer in seine Aufnahme eingesteckt wird. Überblick Standard USB verwendet eine Master-/Slave-Architektur; ein Host fungiert als Mastergerät für den gesamten Bus und ein USB-Gerät fungiert als Slave. Bei der Implementierung von Standard-USB müssen Geräte eine Rolle oder die andere übernehmen, wobei Computer in der Regel als Hosts eingerichtet werden, während (zum Beispiel) Drucker normalerweise als Slaves fungieren. In Abwesenheit von USB OTG implementierten Handys oft Slave-Funktionalität, um eine einfache Übertragung von Daten auf und von Computern zu ermöglichen. Solche Telefone könnten als Slaves nicht ohne weiteres mit Druckern verbunden werden, da sie auch die Slave-Rolle implementiert haben. USB OTG richtet sich direkt an dieses Problem. Wenn ein Gerät in den USB-Bus eingesteckt wird, stellt das Mastergerät oder Host Kommunikation mit dem Gerät ein und behandelt die Servicebereitstellung (die Software des Hosts ermöglicht oder macht die benötigte Datenhandling wie Dateiverwaltung oder andere gewünschte Art von Datenkommunikation oder -funktion). Das erlaubt es, die Geräte im Vergleich zum Host stark vereinfacht zu werden; zum Beispiel enthält eine Maus sehr wenig Logik und setzt auf den Host fast alle Arbeiten zu tun. Der Host steuert alle Datenübermittlungen über den Bus, mit den Geräten in der Lage, nur zu signalisieren (wenn sie abgefragt), dass sie Aufmerksamkeit benötigen. Um Daten zwischen zwei Geräten, beispielsweise von einem Telefon zu einem Drucker, zu übertragen, liest der Host zunächst die Daten von einem Gerät, schreibt es dann zum anderen. Während die Master-Slave-Anordnung für einige Geräte funktioniert, können viele Geräte entweder als Master oder als Slave wirken, je nachdem, was sonst den Bus teilt. Beispielsweise ist ein Computerdrucker in der Regel ein Slave-Gerät, aber wenn ein USB-Flash-Laufwerk mit Bildern in den USB-Anschluss des Druckers mit keinem Computer vorhanden (oder zumindest abgeschaltet), wäre es nützlich, wenn der Drucker die Rolle des Hosts übernimmt, so dass er direkt mit dem Flash-Laufwerk kommunizieren und Bilder daraus drucken kann. USB OTG erkennt, dass ein Gerät sowohl Master- als auch Slave-Rollen ausführen kann und somit die Terminologie subtil ändert. Bei OTG kann ein Gerät entweder ein Host sein, wenn es als Link-Master fungiert, oder eine Peripherie, wenn es als Link-Slave fungiert. Die Wahl zwischen Host- und Peripherie-Rollen wird vollständig gehandhabt, mit welchem Ende des Kabels das Gerät verbunden ist. Das mit dem A-Ende des Kabels verbundene Gerät beim Start-up, bekannt als A-Gerät, fungiert als Standard-Host, während das B-Ende als Standard-Peripheriegerät, bekannt als B-Gerät, fungiert." Nach dem anfänglichen Starten arbeitet das Setup für den Bus so wie mit dem normalen USB-Standard, mit dem A-Device das B-Gerät einrichten und alle Kommunikationen verwalten. Wenn jedoch dasselbe A-Gerät in ein anderes USB-System eingesteckt wird oder ein spezieller Host zur Verfügung steht, kann es ein Slave werden. USB OTG schließt nicht mit einem USB-Hub aus, sondern beschreibt Host-Peripherie-Rollenwechsel nur für den Fall einer One-to-One-Verbindung, bei der zwei OTG-Geräte direkt angeschlossen sind. Rollenwechsel funktioniert nicht über einen Standard-Hub, da ein Gerät als Host und das andere als peripher wirken, bis sie getrennt werden. Spezifikationen USB OTG ist Teil einer Ergänzung zur Universal Serial Bus (USB) 2.0 Spezifikation ursprünglich Ende 2001 vereinbart und später überarbeitet. Die neueste Version der Ergänzung definiert auch Verhalten für einen Embedded Host, der gezielte Fähigkeiten und den gleichen USB Standard-A-Port von PCs verwendet hat. SuperSpeed OTG-Geräte, Embedded Hosts und Peripheriegeräte werden über die USB OTG und Embedded Host Supplement zur USB 3.0 Spezifikation unterstützt. Protokolle Die USB OTG und Embedded Host Supplement zur USB 2.0 Spezifikation haben drei neue Kommunikationsprotokolle eingeführt: Attach Detection Protocol (ADP) Erlaubt ein OTG-Gerät, eingebetteter Host oder USB-Gerät, den Anschlussstatus in Abwesenheit von Energie auf dem USB-Bus zu bestimmen, wodurch sowohl einfügenbasiertes Verhalten als auch die Fähigkeit zur Anzeige des Anhängestatus ermöglicht werden. Durch periodische Messung der Kapazität auf dem USB-Anschluss wird ermittelt, ob ein anderes Gerät angebracht ist, ein dangling-Kabel oder kein Kabel. Wenn eine große, ausreichende Kapazitätsänderung zur Anzeige des Geräteaufsatzes erkannt wird, bietet eine A-Einrichtung dem USB-Bus Strom und sucht nach Geräteanschluss. Gleichzeitig wird ein B-Gerät SRP generieren (siehe unten) und warten, bis der USB-Bus betrieben wird. Session Request Protocol (SRP) ermöglicht es beiden Kommunikationsgeräten, zu kontrollieren, wann die Powersession des Links aktiv ist; in Standard-USB ist nur der Host in der Lage, dies zu tun. Das ermöglicht eine feine Kontrolle über den Stromverbrauch, was für batteriebetriebene Geräte wie Kameras und Mobiltelefone sehr wichtig ist. Der OTG- oder Embedded-Host kann den USB-Link unbestromt lassen, bis die Peripherie (die ein OTG oder Standard-USB-Gerät sein kann) Strom benötigt. OTG und eingebettete Hosts haben in der Regel wenig Batterieleistung, um zu sparen, so dass der USB-Link unbestromt hilft bei der Verlängerung der Akkulaufzeit. Host Negotiation Protocol (HNP) ermöglicht es den beiden Geräten, ihre Host-/Peripherie-Rollen auszutauschen, vorausgesetzt beide sind OTG Dual-Rollen-Geräte. Durch die Verwendung von HNP zur Reversierung von Host/Peripheral-Rollen ist das USB OTG-Gerät in der Lage, die Steuerung des Datentransfers zu erfassen. Somit ist jedes OTG-Gerät in der Lage, Datenübertragung über USB OTG-Bus zu starten. Die neueste Version der Ergänzung führte auch HNP-Umfrage ein, bei der das Host-Gerät während einer aktiven Sitzung die Peripherie periodisch abfragt, um festzustellen, ob es ein Host werden will. Der Hauptzweck von HNP ist es, Benutzer, die die A- und B-Geräte (siehe unten) in die falsche Richtung für die von ihnen durchzuführende Aufgabe angeschlossen haben, aufzunehmen. Beispielsweise ist ein Drucker als A-Gerät (Host) verbunden, kann aber nicht als Host für eine bestimmte Kamera fungieren, da er die Darstellung der Druckaufträge der Kamera nicht versteht. Wenn diese Kamera weiß, wie man mit dem Drucker spricht, wird der Drucker HNP verwenden, um die Slave-Rolle zu wechseln, mit der Kamera wird der Host, so dass Bilder auf der Kamera gespeichert werden, ohne die Kabel wieder zu verbinden. Die neuen OTG-Protokolle können keinen Standard-USB-Hub passieren, da sie auf der elektrischen Signalisierung über einen dedizierten Draht basieren. Die USB OTG und Embedded Host Supplement zur USB 3.0 Spezifikation stellen ein zusätzliches Kommunikationsprotokoll vor: Role Swap Protocol (RSP)RSP erreicht den gleichen Zweck wie HNP (d.h. Rollentausch), indem Standardmechanismen erweitert werden, die durch die USB 3.0 Spezifikation bereitgestellt werden. Produkte, die der USB OTG und der Embedded Host Supplement zur USB 3.0 Spezifikation folgen, sind ebenfalls erforderlich, um die USB 2.0 Ergänzung zu folgen, um die Rückwärtskompatibilität zu erhalten. Für die Unterstützung von RSP sind SuperSpeed OTG-Geräte (SS-OTG) erforderlich. SuperSpeed Peripheral Capable OTG-Geräte (SSPC-OTG) sind nicht erforderlich, um RSP zu unterstützen, da sie nur mit SuperSpeed als Peripherie betrieben werden können; sie haben keinen SuperSpeed-Host und können daher nur mit HNP bei USB 2.0-Datenraten rollen. Geräterollen USB OTG definiert zwei Rollen für Geräte: OTG A-Device und OTG B-Device, die angeben, welche Seite dem Link Strom liefert und welche zunächst der Host ist. Das OTG A-Gerät ist ein Energieversorger und ein OTG B-Gerät ist ein Stromverbraucher. In der Standard-Link-Konfiguration fungiert das A-Gerät als USB-Host mit dem als USB-Peripherie wirkenden B-Gerät. Die Host- und Peripherie-Modi können später mit HNP oder RSP ausgetauscht werden. Da jeder OTG-Controller beide Rollen unterstützt, werden sie oft als Dual-Role-Controller und nicht als "OTG-Controller" bezeichnet. Für integrierte Schaltung (IC)-Designer ist ein attraktives Feature von USB OTG die Möglichkeit, mehr USB-Funktionen mit weniger Gates zu erreichen. Ein traditioneller Ansatz umfasst vier Controller, was zu mehr Toren zum Testen und Debug führt: USB-Hochgeschwindigkeits-Host-Controller auf Basis von EHCI (eine Registerschnittstelle)Full / Low-Speed-Host-Controller auf Basis von OHCI (eine andere Registerschnittstelle) USB-Geräte-Controller, die sowohl hohe als auch volle Geschwindigkeiten unterstützen Vierter Controller, um den OTG-Root-Port zwischen Host- und Gerätesteuerungen zu wechseln Auch die meisten Gadgets müssen entweder ein Host oder ein Gerät sein. OTG-Hardware-Design vereint alle Controller in einen Dual-Rollen-Controller, der etwas komplexer ist als ein einzelner Geräte-Controller. Die gezielte Peripherieliste (TPL)A des Herstellers (TPL) dient dazu, ein Host-Gerät auf bestimmte Produkte oder Anwendungen zu fokussieren, anstatt auf seine Funktion als allgemeiner Host, wie es bei typischen PCs der Fall ist. Die TPL gibt Produkte an, die vom Targeting-Host unterstützt werden und definieren, was sie unterstützen muss, einschließlich der Ausgangsleistung, Übertragungsgeschwindigkeiten, unterstützte Protokolle und Geräteklassen. Es gilt für alle gezielten Hosts, darunter sowohl OTG-Geräte, die als Host fungieren als auch eingebettete Hosts. Stecker OTG Mini Stecker Der ursprüngliche USB OTG-Standard führte einen Stecker-Container namens Mini-AB ein, der in späteren Revisionen durch Mikro-AB ersetzt wurde (Revision 1.4 weiter). Es kann entweder einen Mini-A-Stecker oder einen Mini-B-Stecker akzeptieren, während Mini-A-Adapter die Verbindung zu Standard-A-USB-Kabeln aus Peripheriegeräten ermöglichen. Das Standard OTG-Kabel hat einen Mini-A-Stecker an einem Ende und einen Mini-B-Stecker am anderen Ende (es kann nicht zwei Stecker desselben Typs aufweisen). Das Gerät mit eingesetztem Mini-A-Stecker wird zu einem OTG-A-Gerät und das Gerät mit eingesetztem Mini-B-Stecker wird zu einem B-Gerät (siehe oben). Die Art des eingesetzten Steckers wird durch den Zustand des ID-Pins (der ID-Pin des Mini-A-Plugs wird geerdet, während der Mini-B-Plug schwimmend ist). Es gibt auch reine Mini-A-Behälter, bei denen ein kompakter Host-Port benötigt wird, aber OTG nicht unterstützt wird. OTG Mikrostecker Mit der Einführung des USB-Micro-Steckers wurde auch eine neue Steckeraufnahme namens micro-AB eingeführt. Es kann entweder einen Micro-A-Stecker oder einen Micro-B-Stecker annehmen. Micro-A Adapter ermöglichen den Anschluss an Standard-A-Stecker, wie sie auf Fest- oder Standardgeräten verwendet werden. Ein OTG-Produkt muss eine einzige Micro-AB-Aufnahme und keine anderen USB-Aufnahmen haben. Ein OTG-Kabel hat einen Micro-A-Stecker an einem Ende und einen Micro-B-Stecker am anderen Ende (es kann nicht zwei Stecker desselben Typs aufweisen). OTG fügt dem Standard-USB-Anschluss einen fünften Pin hinzu, der ID-Pin genannt wird; der Micro-A-Stecker hat den ID-Pin geerdet, während die ID im Micro-B-Stecker schwimmend ist. Ein Gerät mit eingesetztem Mikro-A-Stecker wird zu einer OTG-A-Einrichtung und ein Gerät mit eingesetztem Mikro-B-Stecker wird zu einer B-Einrichtung. Die Art des eingesetzten Steckers wird durch den Zustand der Stift-ID erkannt. An den Soll-Widerstandswerten von 124 kΩ, 68 kΩ und 36,5 kΩ sind drei zusätzliche ID-Pin-Zustände definiert. Diese ermöglichen es dem Gerät, mit USB Accessory Ladegerät Adaptern zu arbeiten, die das OTG-Gerät sowohl an einem Ladegerät als auch an einem anderen Gerät gleichzeitig befestigen lassen. Diese drei Zustände werden in den Fällen verwendet: Ein Ladegerät und entweder kein Gerät oder ein A-Gerät, das VBUS nicht behauptet (nicht liefert Leistung). Das OTG-Gerät darf SRP laden und initiieren, aber nicht verbinden. Ein Ladegerät und ein A-Gerät, das VBUS (ist die Bereitstellung von Leistung) behauptet, sind angebracht. Das OTG-Gerät ist erlaubt, das SRP.A-Ladegerät zu laden und zu verbinden, aber nicht zu initiieren. Das OTG-Gerät darf den Hostmodus laden und eingeben. USB 3.0 führte eine rückwärtskompatibele SuperSpeed-Erweiterung des Mikro-AB-Behälters und Micro-A- und Micro-B-Steckers ein. Sie enthalten alle Pins der nicht-Superspeed Mikro-Steckverbinder und verwenden den ID-Pin, um die A-Geräte- und B-Geräte-Rollen zu identifizieren, zusätzlich die SuperSpeed-Pins. OTG Mikrokabel Wenn ein OTG-fähiges Gerät mit einem PC verbunden ist, verwendet es ein eigenes USB-A- oder USB-Typ-C-Kabel (typischerweise in Mikro-B, USB-C oder Lightning-Steckern für moderne Geräte). Wenn ein OTG-fähiges Gerät an einem USB-Slavegerät, wie einem Flash-Laufwerk, befestigt ist, muss das Slave-Gerät entweder in der entsprechenden Verbindung für das Gerät enden, oder der Benutzer muss einen entsprechenden Adapter in USB-A liefern. Der Adapter ermöglicht die Befestigung jeder Standard-USB-Peripherie an einem OTG-Gerät. Die gemeinsame Befestigung von zwei OTG-fähigen Geräten erfordert entweder einen Adapter in Verbindung mit dem USB-A-Kabel des Slave-Geräts oder ein entsprechendes duales Kabel und eine Software-Implementierung, um es zu verwalten. Dies wird häufig mit USB Type-C Geräten. Smartphone und Tablet-Implementierung BlackBerry 10.2 implementiert Host Mode (wie im BlackBerry Z30 Handy). Nokia hat USB OTG in vielen ihrer Symbian Handys wie Nokia N8, C6-01, C7, Oro, E6, E7, X7, 603, 700, 701 und 808 Pureview implementiert. Einige High-End Android-Handys produziert von HTC, und Sony unter Xperia Serie haben es auch. Samsung Android Version 3.1 oder neuer unterstützt USB OTG, aber nicht auf allen Geräten. Host-powered: Sony Ericsson Xperia pro Braucht externe USB-Leistung: Motorola Droid 4Specifications auf Technologie-Webseiten (wie GSMArena, PDAdb.net, PhoneScoop und andere) können helfen, die Kompatibilität zu bestimmen. Mit GSMArena als Beispiel würde man die Seite für ein bestimmtes Gerät lokalisieren und das Verbiage unter Spezifikationen → Comms → USB untersuchen. Wenn "USB Host" angezeigt wird, sollte das Gerät in der Lage sein, externe USB-Zubehör vom OTG-Typ zu unterstützen. Bei vielen der vorstehenden Ausführungen weist das Hostgerät lediglich eine Mikro-B-Aufnahme anstelle einer Mikro-AB-Aufnahme auf. Obwohl nicht-Standard, Mikro-B zu micro-A-Aufnahmeadapter sind weit verbreitet und anstelle der beauftragten Mikro-AB-Aufnahme auf diesen Geräten verwendet. Backward-Kompatibilität USB OTG-Geräte sind rückwärtskompatibel mit USB 2.0 (USB 3.0 für SuperSpeed OTG-Geräte) und verhalten sich als Standard-USB-Hosts oder -Geräte, wenn sie mit Standard-USB-Geräten verbunden sind. Die wichtigste Ausnahme ist, dass OTG-Hosts nur benötigt werden, um genügend Strom für die auf der TPL aufgeführten Produkte bereitzustellen, die möglicherweise oder nicht genug sein können, um mit einer nicht aufgeführten Peripherie zu verbinden. Ein powered USB-Hub kann das Problem, wenn unterstützt, seit es dann seine eigene Leistung nach den USB 2.0 oder USB 3.0 Spezifikationen zur Verfügung stellen. Einige Inkompatibilitäten in HNP und SRP wurden zwischen den Versionen 1.3 und 2.0 der OTG-Ergänzung eingeführt, was bei der Verwendung dieser Protokollversionen zu Interoperabilitätsproblemen führen kann. Ladegerätkompatibilität Einige Geräte können ihre USB-Anschlüsse verwenden, um eingebaute Batterien aufzuladen, während andere Geräte ein dediziertes Ladegerät erkennen und mehr als 500 mA (0,5 A) zeichnen können, so dass sie schneller aufladen. OTG-Geräte können wahlweise verwendet werden. Siehe auch Android Open Accessory Development Kit Mobile High-Definition Link, die den USB On-the-go ID Pin Handy-Zubehör USB menschliche Schnittstelle Geräteklasse Referenzen Externe Links Offizielle Website "USB OTG Flash Drives". Kingston. Broida, Rick (5. Februar 2014)."Wie zu sagen, ob Ihr Android-Handy oder Tablet USB On-The-Go unterstützt". CNet.Bezieht sich auf zwei Apps, um die OTG-Kompatibilität zu überprüfen und zu überwinden (root) und OTG zu aktivieren